<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Upload</title>
    <script src="./index.js"></script>
    <style>
      table {
        margin-top: 1rem;
      }
      th {
        text-transform: capitalize;
      }
      th,
      td {
        padding: 0.5rem;
        border: 1px solid;
      }
    </style>
  </head>
  <body id="body">
    <button onclick="getUsers()">get all users</button>
    <input type="file" onchange="handleFileUpload(event)" />

    <script>
      const getAllUsers = `
            query {
        getAllUsers {
          id,
          name,
          age,
          email,
          created
        }
      }
      `;

      const handleFileUpload = async (e) => {
        const file = e.target.files[0];
        const res = await upload(file);
        console.log(res);
      };

      const getUsers = async function () {
        const value = await axios(getAllUsers);
        if (!value?.errors) {
          addToTable(value.data);
        }
      };
    </script>
  </body>
</html>
